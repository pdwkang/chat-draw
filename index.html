<!-- THIS IS THE CLIENT -->

<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>

 	<h1>Hello, world</h1>
 	<div>
 		<h3>Enter your message here</h3>
 		<input type='text' id='chat-message' />
 		<input type='button' value='send!' onclick="sendChatMessage()" />
 		<div id='userChats'></div>
 	</div>
 	<div id='userNames'></div>

	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.2/socket.io.js"></script>



	<script type="text/javascript">
		// console.log($) -> console.log(io)     same concept
		var socketio = io.connect('http://127.0.0.1:8080');
		//once we have this connection(above) we get this whole document(index.html): only way to get this to the browser
		socketio.on('users', (socketUsers) =>{
			console.log(socketUsers)
			var newHTML = "";
			socketUsers.map((currSocket, index) => {
				newHTML += '<li class="user">' + currSocket.name + '</li>';
			})
			document.getElementById('userNames').innerHTML = newHTML;
		});

		function sendChatMessage(){
			var messageToSend = document.getElementById('chat-message').value;
			socketio.emit('messageToServer', {
				// messageObject
				message: messageToSend,
				name: "Anonymous"
			})
		};

		socketio.on('messageToClient', (messageObject) => {
			document.getElementById('userChats').innerHTML += '<div class="message">' + messageObject.message + '__' + messageObject.date + '</div>'
		});






	</script>
</body>
</html>